(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{540:function(t,e,a){"use strict";a.r(e);var i=a(1),n=a(0),s=(a(5),a(491)),r=a(119),o=a(492);const l="AIzaSyBAdbZ7wy43UhBT3IyxxhhQv_Wnzi_P2mE",c="https://www.googleapis.com/youtube/v3";function p(t){return fetch(t).then(t=>{if(t.ok)return t.json();const e=new Error(`Fetch failure: ${t.status}`);throw e.url=c,e.status=t.status,e}).catch(t=>({error:t}))}var d=a(539),u=a(77);a.d(e,"YouTube",(function(){return P})),a.d(e,"checkCompletion",(function(){return b}));var y=a(2).h;let h=[],f=!1;function m(t){const e=t.match(/PT(\d+)?M?(\d+)?S?/);return t.indexOf("M")?60*e[1]+1*e[2]:e[1]}function b(t,e,a,i){const n=t.getCurrentTime();t[a]=t[a]||{},Object.keys(e).forEach(r=>{if(e[r]<=n&&!t[a][r])switch(t[a][r]=!0,r){case"25":s.a.onTwentyFivePercent(i);break;case"50":s.a.onFiftyPercent(i);break;case"75":s.a.onSeventyFivePercent(i)}})}function g(t,e,a){const i=t.getPlayerState(),n=function(t){const e={};return[25,50,75].forEach(a=>{const i=t*a/100;e[a]=Math.floor(i)}),e}(Math.floor(t.getDuration())),s=e;1!==i||s.timer?(clearInterval(s.timer),s.timer=!1):(clearInterval(s.timer),s.timer=setInterval(()=>{b(t,n,s.videoId,a)},1e3))}window.onYouTubeIframeAPIReady=()=>{f=!0,h.forEach(t=>t()),h=void 0};const v={};function I(t,e){const a=v[t];a&&a.resolve?(a.resolve(e),delete a.resolve):v[t]={load:Promise.resolve(e)}}const w=Object(n.a)('& .inner-wrapper{font-size:0;line-height:0;outline:none;overflow:hidden;position:relative;touch-callout:none;user-select:none;display:block;&::after{background-repeat:no-repeat;background-size:cover;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0;}> iframe{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1;}}display:block;padding-top:24;position:relative;width:100%;'),k="Youtube";class P extends i.Component{constructor(t){super(t),this.onStateChange=t=>{const{currentMedia:e}=this.state;switch(this.player&&g(this.player,this.player.getIframe(),e),t.data){case-1:this.playing=!1;break;case 0:s.a.onOneHundredPercent(e);break;case 1:this.onPlay();break;case 2:case 3:break;case 5:this.loadPlaylist();break;default:return null}return null},this.onPlay=()=>{if(this.playing)return;this.playing=!0;const{playlist:t,currentMedia:e}=this.state,a=this.player.getPlaylistIndex();-1===a?s.a.onPlay(e):(this.setState({playingIndex:a,currentMedia:t[a]}),s.a.onPlay(t[a]),this.player&&g(this.player,this.player.getIframe(),t[a]))},this.onReady=()=>{const{mediaId:t,type:e}=this.props;if("playlist"===e)I(t,`playlist ${t}`),this.player.cuePlaylist({listType:"playlist",list:t});else{const e=this.player.getVideoData().title;I(t,e),this.setState({currentMedia:{category:k,title:e}})}},this.updatePlayer=t=>{this.playing=!1,this.player.playVideoAt(t)},this.init=()=>{const{playerId:t}=this.state;this.player=new YT.Player(t,{height:"100%",width:"100%",events:{onStateChange:this.onStateChange,onReady:this.onReady},...this.sourceSetup()})};const{mediaId:e,parentKey:a,title:i}=t;this.state={reactYoutubeReady:!1,playerId:`youtube-${e}-${a}`,playlist:[{category:k,title:i}],playingIndex:null,currentMedia:{category:k,title:i}},this.playing=!1}componentDidMount(){void 0===window.YT&&Object(r.a)("https://www.youtube.com/iframe_api").catch(()=>{}),f?this.init():h.push(this.init)}loadPlaylist(){const{mediaId:t}=this.props;return(e=t,p(`${c}/playlistItems?part=contentDetails&maxResults=50&playlistId=${e}&key=${l}`)).then(({items:t})=>(function(t){return p(`${c}/videos?part=contentDetails,snippet&id=${encodeURI(t)}&key=${l}`)})(t.map(t=>t.contentDetails.videoId))).then(({items:t})=>{const e=t.map(t=>({duration:m(t.contentDetails.duration),title:t.snippet.title,image:t.snippet.thumbnails.high.url,mediaid:t.id}));this.setState({playlist:e,reactYoutubeReady:!0})});var e}sourceSetup(){const{mediaId:t,type:e}=this.props;return"playlist"===e?{playerVars:{autoplay:0,controls:1}}:{videoId:t}}render(){const{transcripts:t,title:e,type:a}=this.props,{playerId:i,playlist:n,playingIndex:s,reactYoutubeReady:r}=this.state;return y("span",{className:w,css:[{"& .inner-wrapper":{paddingTop:"56.25%"}}]},y("span",{tabIndex:"-1",className:"inner-wrapper"},y("div",{id:i})),"playlist"===a&&r&&y(d.a,{css:"margin-top: 30px",currentlyPlayingIndex:s,handleItemClick:this.updatePlayer,playlist:n}),t&&t.length>0&&y(o.a,{title:e,content:t[0]}))}}e.default=Object(u.a)((t,e)=>{if(t.mediaId)return function(t){let e=v[t];return e||((e=v[t]={}).load=new Promise(t=>{e.resolve=t})),e.load}(t.mediaId).then(a=>({category:`Video - ${k}`,action:a||t.mediaId,label:e}))},P)},745:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return s}));var i=a(538),n=a(2).h;function s({id:t,playlist:e,title:a,skipperiod:s,videotrackers:r,transcripts:o,enablepostroll:l,autoplay:c}){return n(i.default,{mediaId:t,title:a,type:void 0!==e?"playlists":"media",adSkipOffset:s,videoTrackers:r,transcripts:o,enablePostRoll:l,options:{autoplay:c}})}}}]);
//# sourceMappingURL=video-623e1.js.map